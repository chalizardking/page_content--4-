(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19298,(e,t,r)=>{"use strict";var n,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(e,t){return new Promise(function(r,n){var o,i,s;function a(r){e.removeListener(t,l),n(r)}function l(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}v(e,t,l,{once:!0}),"error"!==t&&(o=e,i=a,s={once:!0},"function"==typeof o.on&&v(o,"error",i,s))})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){if(u(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=c(e))>0&&s.length>o&&!s.warned){s.warned=!0;var o,i,s,a=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=d.bind(n);return o.listener=r,n.wrapFn=o,o}function p(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):y(o,o.length)}function g(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function v(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function o(i){n.once&&e.removeEventListener(t,o),r(i)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||s(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),a.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var s,a=Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else for(var u=l.length,c=y(l,u),r=0;r<u;++r)i(c[r],this,t);return!0},a.prototype.addListener=function(e,t){return h(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return h(this,e,t,!0)},a.prototype.once=function(e,t){return u(t),this.on(e,f(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,f(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,i,s;if(u(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},67034,(e,t,r)=>{var n={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,i=l(e),s=i[0],a=i[1],u=new o((s+a)*3/4-a),c=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],s=0,a=n-o;s<a;s+=16383)i.push(function(e,t,n){for(var o,i=[],s=t;s<n;s+=3)o=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(r[o>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return i.join("")}(e,s,s+16383>a?a:s+16383));return 1===o?i.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===o&&i.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),i.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=i.length;s<a;++s)r[s]=i[s],n[i.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n[45]=62,n[95]=63},72:function(e,t,r){"use strict";var n=r(675),o=r(783),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var n=e,o=t;if(("string"!=typeof o||""===o)&&(o="utf8"),!a.isEncoding(o))throw TypeError("Unknown encoding: "+o);var i=0|f(n,o),l=s(i),u=l.write(n,o);return u!==i&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(A(e,ArrayBuffer)||e&&A(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(A(e,SharedArrayBuffer)||e&&A(e.buffer,SharedArrayBuffer)))return function(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),n}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return a.from(c,t,r);var p=function(e){if(a.isBuffer(e)){var t=0|d(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?s(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(p)return p;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),s(e<0?0:0|d(e))}function h(e){for(var t=e.length<0?0:0|d(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(u(e),e<=0)?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||A(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return S(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return C(e).length;default:if(o)return n?-1:S(e).length;t=(""+t).toLowerCase(),o=!0}}function p(e,t,r){var o,i,s,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=R[e[i]];return o}(this,t,r);case"utf8":case"utf-8":return m(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}(this,t,r);case"base64":return o=this,i=t,s=r,0===i&&s===o.length?n.fromByteArray(o):n.fromByteArray(o.slice(i,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}(this,t,r);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,o){var i;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(i=r*=1)!=i&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(o)return -1;else r=e.length-1;else if(r<0)if(!o)return -1;else r=0;if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,o);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(o)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return v(e,[t],r,n,o)}throw TypeError("val must be string, number or Buffer")}function v(e,t,r,n,o){var i,s=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,a/=2,l/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var c=-1;for(i=r;i<a;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*s}else -1!==c&&(i-=i-c),c=-1}else for(r+l>a&&(r=a-l),i=r;i>=0;i--){for(var h=!0,d=0;d<l;d++)if(u(e,i+d)!==u(t,d)){h=!1;break}if(h)return i}return -1}a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(A(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),A(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:+(n<r)},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=a.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(A(i,Uint8Array)&&(i=a.from(i)),!a.isBuffer(i))throw TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?m(this,0,e):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(e,t,r,n,o){if(A(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var i=o-n,s=r-t,l=Math.min(i,s),u=this.slice(n,o),c=e.slice(t,r),h=0;h<l;++h)if(u[h]!==c[h]){i=u[h],s=c[h];break}return i<s?-1:+(s<i)},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)};function m(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,l,u=e[o],c=null,h=u>239?4:u>223?3:u>191?2:1;if(o+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:(192&(i=e[o+1]))==128&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=e[o+1],s=e[o+2],(192&i)==128&&(192&s)==128&&(l=(15&u)<<12|(63&i)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],(192&i)==128&&(192&s)==128&&(192&a)==128&&(l=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=h}var d=n,f=d.length;if(f<=4096)return String.fromCharCode.apply(String,d);for(var p="",g=0;g<f;)p+=String.fromCharCode.apply(String,d.slice(g,g+=4096));return p}function w(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function b(e,t,r,n,o,i){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function x(e,t,r,n,o,i){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function j(e,t,r,n,i){return t*=1,r>>>=0,i||x(e,t,r,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,i){return t*=1,r>>>=0,i||x(e,t,r,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,r,n,52,8),r+8}a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o,i,s,a,l,u,c,h,d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var f=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a,l=parseInt(t.substr(2*s,2),16);if((a=l)!=a)break;e[r+s]=l}return s}(this,e,t,r);case"utf8":case"utf-8":return o=t,i=r,U(S(e,this.length-o),this,o,i);case"ascii":return s=t,a=r,U(O(e),this,s,a);case"latin1":case"binary":return function(e,t,r,n){return U(O(t),e,r,n)}(this,e,t,r);case"base64":return l=t,u=r,U(C(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,h=r,U(function(e,t){for(var r,n,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o.push(r%256),o.push(n);return o}(e,this.length-c),this,c,h);default:if(f)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},a.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),o.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),o.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),o.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),o.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var o=Math.pow(2,8*r)-1;b(this,e,t,r,o,0)}var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var o=Math.pow(2,8*r)-1;b(this,e,t,r,o,0)}var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var o=Math.pow(2,8*r-1);b(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s|0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var o=Math.pow(2,8*r-1);b(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s|0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var i=o-1;i>=0;--i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return o},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var o,i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=a.isBuffer(e)?e:a.from(e,n),l=s.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%l]}return this};var E=/[^+/0-9A-Za-z-_]/g;function S(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319||s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return i}function O(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function C(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length)&&!(o>=e.length);++o)t[o+r]=e[o];return o}function A(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var R=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,o=0;o<16;++o)t[n+o]=e[r]+e[o];return t}()},783:function(e,t){t.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=r?o-1:0,d=r?-1:1,f=e[t+h];for(h+=d,i=f&(1<<-c)-1,f>>=-c,c+=a;c>0;i=256*i+e[t+h],h+=d,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;c>0;s=256*s+e[t+h],h+=d,c-=8);if(0===i)i=1-u;else{if(i===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),i-=u}return(f?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var s,a,l,u=8*i-o-1,c=(1<<u)-1,h=c>>1,d=5960464477539062e-23*(23===o),f=n?0:i-1,p=n?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(s++,l/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(t*l-1)*Math.pow(2,o),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;e[r+f]=255&a,f+=p,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[r+f]=255&s,f+=p,s/=256,u-=8);e[r+f-p]|=128*g}}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}},s=!0;try{n[e](r,r.exports,i),s=!1}finally{s&&delete o[e]}return r.exports}i.ab="/ROOT/node_modules/next/dist/compiled/buffer/",t.exports=i(72)},30860,(e,t,r)=>{"use strict";var n=function(e){var t,r,n;return!!(t=e)&&"object"==typeof t&&(r=e,"[object RegExp]"!==(n=Object.prototype.toString.call(r))&&"[object Date]"!==n&&r.$$typeof!==o)},o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?u(Array.isArray(e)?[]:{},e,t):e}function s(e,t,r){return e.concat(t).map(function(e){return i(e,r)})}function a(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function l(e,t){try{return t in e}catch(e){return!1}}function u(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||s,r.isMergeableObject=r.isMergeableObject||n,r.cloneUnlessOtherwiseSpecified=i;var o,c,h=Array.isArray(t);return h!==Array.isArray(e)?i(t,r):h?r.arrayMerge(e,t,r):(c={},(o=r).isMergeableObject(e)&&a(e).forEach(function(t){c[t]=i(e[t],o)}),a(t).forEach(function(r){l(e,r)&&!(Object.hasOwnProperty.call(e,r)&&Object.propertyIsEnumerable.call(e,r))||(l(e,r)&&o.isMergeableObject(t[r])?c[r]=(function(e,t){if(!t.customMerge)return u;var r=t.customMerge(e);return"function"==typeof r?r:u})(r,o)(e[r],t[r],o):c[r]=i(t[r],o))}),c)}u.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,r){return u(e,r,t)},{})},t.exports=u},69489,46920,e=>{"use strict";var t,r,n,o,i,s,a,l,u,c,h=e.i(15760),d=e.i(47167);let f="0x4AAAAAACGu8iqx5LF2Ftg_";async function p(e){return(window.turnstile||await function(e=1e4){return new Promise((t,r)=>{if(window.turnstile)return void t();let n=Date.now(),o=setInterval(()=>{window.turnstile?(clearInterval(o),t()):Date.now()-n>e&&(clearInterval(o),r(Error("Turnstile script load timeout")))},100)})}(),window.turnstile)?new Promise((t,r)=>{let n=document.createElement("div");n.style.display="none",document.body.appendChild(n);let o=null,i=null,s=()=>{i&&clearTimeout(i),o&&window.turnstile&&window.turnstile.remove(o),n.remove()};i=setTimeout(()=>{s(),r(Error("Turnstile token generation timed out"))},3e4);try{o=window.turnstile.render(n,{sitekey:f,size:"invisible",action:e,callback:e=>{s(),t(e)},"error-callback":e=>{s(),console.error("[Turnstile] Challenge failed:",e),r(Error("CAPTCHA challenge failed"))},"expired-callback":()=>{s(),r(Error("CAPTCHA token expired"))}})}catch(e){s(),console.error("[Turnstile] Render failed:",e),r(e)}}):(console.error("[Turnstile] Script not loaded after waiting"),null)}async function g({token:e,...t}){let r=null;if(f)try{r=await p("generate_video")}catch(e){console.error("[Video] Failed to get Turnstile token:",e)}return(0,h.apiFetchWithAuth)("/generate",{method:"POST",body:JSON.stringify({query:t.query,quality:t.quality??"medium",language:t.language??"hindi",duration:t.duration??2,images:t.images??null,chat_id:t.chatId??null,mode:t.mode??"video",cf_turnstile_token:r}),token:e})}async function y({jobId:e,token:t}){return(0,h.apiFetchWithAuth)(`/jobs/${e}/stop`,{method:"POST",token:t})}e.s(["generateVideo",()=>g,"stopJob",()=>y],69489);var v=e.i(43476),m=e.i(71645),w=e.i(75558),b=e.i(3116),x=e.i(75254);let j=(0,x.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),k=(0,x.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var E=e.i(31278);let S=(0,x.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var O=e.i(86311),C=e.i(7233),U=e.i(19909),A=e.i(78716),R=e.i(56143),M=e.i(47163);let T=(0,x.default)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),N=(0,x.default)("mic-off",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]]);var I=e.i(63209);class _ extends Error{constructor(e){super(e),this.__dgError=!0,this.name="DeepgramError"}}function B(e){return"object"==typeof e&&null!==e&&"__dgError"in e}class P extends _{constructor(e,t){super(e),this.name="DeepgramApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class L extends _{constructor(e,t){super(e),this.name="DeepgramUnknownError",this.originalError=t}}class q extends _{constructor(){super("You are attempting to use an old format for a newer SDK version. Read more here: https://dpgr.am/js-v3"),this.name="DeepgramVersionError"}}class D extends _{constructor(e,t={}){super(e),this.name="DeepgramWebSocketError",this.originalEvent=t.originalEvent,this.statusCode=t.statusCode,this.requestId=t.requestId,this.responseHeaders=t.responseHeaders,this.url=t.url,this.readyState=t.readyState}toJSON(){return{name:this.name,message:this.message,statusCode:this.statusCode,requestId:this.requestId,responseHeaders:this.responseHeaders,url:this.url,readyState:this.readyState,originalEvent:this.originalEvent?{type:this.originalEvent.type,timeStamp:this.originalEvent.timeStamp}:void 0}}}var z=e.i(19298),F=e.i(67034),J=e.i(20502),$=e.i(30860);let W=void 0!==d.default&&d.default.versions&&d.default.versions.node?d.default.versions.node:"unknown",H=void 0!==d.default&&d.default.versions&&d.default.versions.bun?d.default.versions.bun:"unknown",V="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"unknown";function K(e={},t={}){return(0,$.default)(t,e)}let G=e=>!!e&&!!e.url,Y=e=>!!e&&!!e.text,X=e=>!!(Z(e)||Q(e)),Q=e=>null!=e&&F.Buffer.isBuffer(e),Z=e=>null!=e&&"unknown"===V&&"object"==typeof e&&"function"==typeof e.pipe&&"function"==typeof e.read&&"object"==typeof e._readableState;URL;let ee="4.11.2",et={"Content-Type":"application/json","X-Client-Info":`@deepgram/sdk; ${"unknown"!==V?"browser":"server"}; v${ee}`,"User-Agent":`@deepgram/sdk/${ee} ${"unknown"!==W?`node/${W}`:"unknown"!==H?`bun/${H}`:"unknown"!==V?`javascript ${V}`:"unknown"}`},er="https://api.deepgram.com",en="wss://agent.deepgram.com",eo={global:{fetch:{options:{url:er,headers:et}},websocket:{options:{url:er.toLowerCase().replace(/^http/,"ws"),_nodeOnlyHeaders:et}}},agent:{fetch:{options:{url:er,headers:et}},websocket:{options:{url:en,_nodeOnlyHeaders:et}}}};(t=s||(s={}))[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed",(r=a||(a={})).Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed";let ei=()=>{};class es extends z.EventEmitter{constructor(e){if(super(),this.factory=void 0,this.key=void 0,this.accessToken=void 0,this.namespace="global",this.version="v1",this.baseUrl=er,this.logger=ei,"function"==typeof e.accessToken?(this.factory=e.accessToken,this.accessToken=this.factory()):this.accessToken=e.accessToken,"function"==typeof e.key?(this.factory=e.key,this.key=this.factory()):this.key=e.key,this.key||this.accessToken||(this.accessToken=d.default.env.DEEPGRAM_ACCESS_TOKEN,this.accessToken||(this.key=d.default.env.DEEPGRAM_API_KEY)),!this.key&&!this.accessToken)throw new _("A deepgram API key or access token is required.");e=(e=>{var t,r,n,o,i,s;let a={};return e._experimentalCustomFetch&&(a.global={fetch:{client:e._experimentalCustomFetch}}),(null==(t=(e=(0,$.default)(e,a)).restProxy)?void 0:t.url)&&(a.global={fetch:{options:{proxy:{url:null==(r=e.restProxy)?void 0:r.url}}}}),(null==(n=(e=(0,$.default)(e,a)).global)?void 0:n.url)&&(a.global={fetch:{options:{url:e.global.url}},websocket:{options:{url:e.global.url}}}),(null==(o=(e=(0,$.default)(e,a)).global)?void 0:o.headers)&&(a.global={fetch:{options:{headers:null==(i=e.global)?void 0:i.headers}},websocket:{options:{_nodeOnlyHeaders:null==(s=e.global)?void 0:s.headers}}}),e=(0,$.default)(e,a)})(e),this.options=K(e,eo)}v(e="v1"){return this.version=e,this}get namespaceOptions(){return Object.assign(Object.assign({},K(this.options[this.namespace],this.options.global)),{key:this.key})}getRequestUrl(e,t={version:this.version},r){var n;t.version=this.version;let o=new URL(e=e.replace(/:(\w+)/g,function(e,r){return t[r]}),this.baseUrl);return r&&(n=o.searchParams,Object.keys(r).forEach(e=>{Array.isArray(r[e])?r[e].forEach(t=>{n.append(e,String(t))}):n.append(e,String(r[e]))})),o}log(e,t,r){this.logger(e,t,r)}}(n=l||(l={})).Open="Open",n.Close="Close",n.Error="Error",n.Audio="Audio",n.Welcome="Welcome",n.SettingsApplied="SettingsApplied",n.ConversationText="ConversationText",n.UserStartedSpeaking="UserStartedSpeaking",n.AgentThinking="AgentThinking",n.FunctionCallRequest="FunctionCallRequest",n.AgentStartedSpeaking="AgentStartedSpeaking",n.AgentAudioDone="AgentAudioDone",n.InjectionRefused="InjectionRefused",n.PromptUpdated="PromptUpdated",n.SpeakUpdated="SpeakUpdated",n.Unhandled="Unhandled";let ea="undefined"!=typeof WebSocket;class el extends es{constructor(e){super(e),this.conn=null,this.sendBuffer=[],this.reconnect=ei;const{key:t,websocket:{options:r,client:n}}=this.namespaceOptions;this.proxy?this.baseUrl=r.proxy.url:this.baseUrl=r.url,n?this.transport=n:this.transport=null,r._nodeOnlyHeaders?this.headers=r._nodeOnlyHeaders:this.headers={},"Authorization"in this.headers||(this.accessToken?this.headers.Authorization=`Bearer ${this.accessToken}`:this.headers.Authorization=`Token ${t}`)}connect(t,r){if(this.conn)return;this.reconnect=(e=t)=>{this.connect(e,r)};let n=this.getRequestUrl(r,{},t),o=this.accessToken,i=this.key;if(!o&&!i)throw Error("No key or access token provided for WebSocket connection.");if(this.transport){this.conn=new this.transport(n,void 0,{headers:this.headers}),this.setupConnection();return}if("unknown"!==H)return void e.A(56555).then(({default:e})=>{this.conn=new e(n,{headers:this.headers}),console.log("Using WS package"),this.setupConnection()});if(ea){this.conn=new WebSocket(n,o?["bearer",o]:["token",i]),this.setupConnection();return}this.conn=new eu(n,void 0,{close:()=>{this.conn=null}}),e.A(56555).then(({default:e})=>{this.conn=new e(n,void 0,{headers:this.headers}),this.setupConnection()})}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null)}connectionState(){switch(this.conn&&this.conn.readyState){case s.connecting:return a.Connecting;case s.open:return a.Open;case s.closing:return a.Closing;default:return a.Closed}}getReadyState(){var e,t;return null!=(t=null==(e=this.conn)?void 0:e.readyState)?t:s.closed}isConnected(){return this.connectionState()===a.Open}send(e){let t=()=>{var t,r,n,o;return t=this,r=void 0,n=void 0,o=function*(){var t;if(e instanceof Blob){if(0===e.size)return void this.log("warn","skipping `send` for zero-byte blob",e);e=yield e.arrayBuffer()}"string"==typeof e||(null==e?void 0:e.byteLength)?null==(t=this.conn)||t.send(e):this.log("warn","skipping `send` for zero-byte payload",e)},new(n||(n=Promise))(function(e,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof n?r:new n(function(e){e(r)})).then(s,a)}l((o=o.apply(t,r||[])).next())})};this.isConnected()?t():this.sendBuffer.push(t)}get proxy(){var e;return"proxy"===this.key&&!!(null==(e=this.namespaceOptions.websocket.options.proxy)?void 0:e.url)}extractErrorInformation(e,t){var r;let n={};if(t&&(n.readyState=t.readyState,n.url="string"==typeof t.url?t.url:null==(r=t.url)?void 0:r.toString()),t&&"object"==typeof t){if(t._req&&t._req.res&&(n.statusCode=t._req.res.statusCode,t._req.res.headers)){n.responseHeaders=Object.assign({},t._req.res.headers);let e=t._req.res.headers["dg-request-id"]||t._req.res.headers["x-dg-request-id"];e&&(n.requestId=e)}if(e&&"target"in e&&e.target){let t=e.target;t.url&&(n.url=t.url),void 0!==t.readyState&&(n.readyState=t.readyState)}}return n}createEnhancedError(e,t){let r=new D(e.message||"WebSocket connection error",Object.assign({originalEvent:e},t));return Object.assign(Object.assign({},e),{error:r,statusCode:t.statusCode,requestId:t.requestId,responseHeaders:t.responseHeaders,url:t.url,readyState:t.readyState,message:this.buildEnhancedErrorMessage(e,t)})}buildEnhancedErrorMessage(e,t){let r=e.message||"WebSocket connection error",n=[];if(t.statusCode&&n.push(`Status: ${t.statusCode}`),t.requestId&&n.push(`Request ID: ${t.requestId}`),void 0!==t.readyState){let e=["CONNECTING","OPEN","CLOSING","CLOSED"][t.readyState]||`Unknown(${t.readyState})`;n.push(`Ready State: ${e}`)}return t.url&&n.push(`URL: ${t.url}`),n.length>0&&(r+=` (${n.join(", ")})`),r}setupConnectionEvents(e){this.conn&&(this.conn.onopen=()=>{this.emit(e.Open,this)},this.conn.onclose=t=>{this.emit(e.Close,t)},this.conn.onerror=t=>{let r=this.extractErrorInformation(t,this.conn||void 0),n=this.createEnhancedError(t,r);this.emit(e.Error,n)})}}class eu{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=s.connecting,this.send=()=>{},this.url=null,this.url=e.toString(),this.close=r.close}}class ec extends el{constructor(e,t="/:version/agent/converse"){var r,n,o,i;super(e),this.namespace="agent",this.baseUrl=null!=(i=null==(o=null==(n=null==(r=e.agent)?void 0:r.websocket)?void 0:n.options)?void 0:o.url)?i:en,this.connect({},t)}setupConnection(){this.setupConnectionEvents({Open:l.Open,Close:l.Close,Error:l.Error}),this.conn&&(this.conn.onmessage=e=>{this.handleMessage(e)})}handleMessage(e){var t,r,n,o,i,s;if("string"==typeof e.data)try{let t=JSON.parse(e.data);this.handleTextMessage(t)}catch(i){this.emit(l.Error,{event:e,data:(null==(t=e.data)?void 0:t.toString().substring(0,200))+((null==(r=e.data)?void 0:r.toString().length)>200?"...":""),message:"Unable to parse `data` as JSON.",error:i,url:null==(n=this.conn)?void 0:n.url,readyState:null==(o=this.conn)?void 0:o.readyState})}else e.data instanceof Blob?e.data.arrayBuffer().then(e=>{this.handleBinaryMessage(F.Buffer.from(e))}):e.data instanceof ArrayBuffer?this.handleBinaryMessage(F.Buffer.from(e.data)):F.Buffer.isBuffer(e.data)?this.handleBinaryMessage(e.data):(console.log("Received unknown data type",e.data),this.emit(l.Error,{event:e,message:"Received unknown data type.",url:null==(i=this.conn)?void 0:i.url,readyState:null==(s=this.conn)?void 0:s.readyState,dataType:typeof e.data}))}handleBinaryMessage(e){this.emit(l.Audio,e)}handleTextMessage(e){e.type in l?this.emit(e.type,e):this.emit(l.Unhandled,e)}configure(e){let t=JSON.stringify(Object.assign({type:"Settings"},e));this.send(t)}updatePrompt(e){this.send(JSON.stringify({type:"UpdatePrompt",prompt:e}))}updateSpeak(e){this.send(JSON.stringify({type:"UpdateSpeak",speak:e}))}injectAgentMessage(e){this.send(JSON.stringify({type:"InjectAgentMessage",content:e}))}injectUserMessage(e){this.send(JSON.stringify({type:"InjectUserMessage",content:e}))}functionCallResponse(e){this.send(JSON.stringify(Object.assign({type:"FunctionCallResponse"},e)))}keepAlive(){this.send(JSON.stringify({type:"KeepAlive"}))}}var eh=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},ed=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})};class ef extends es{constructor(e){if(super(e),"unknown"!==V&&!this.proxy)throw new _("Due to CORS we are unable to support REST-based API calls to our API from the browser. Please consider using a proxy: https://dpgr.am/js-proxy for more information.");const{accessToken:t,key:r,fetch:n}=this;this.fetch=(({apiKey:e,customFetch:t,accessToken:r})=>{let n,o=(n=t||("undefined"==typeof fetch?J.default:fetch),(...e)=>n(...e)),i="undefined"==typeof Headers?J.Headers:Headers;return(t,n)=>eh(void 0,void 0,void 0,function*(){let s=new i(null==n?void 0:n.headers);return s.has("Authorization")||s.set("Authorization",r?`Bearer ${r}`:`Token ${e}`),o(t,Object.assign(Object.assign({},n),{headers:s}))})})({accessToken:t,apiKey:r,customFetch:n}),this.proxy?this.baseUrl=this.namespaceOptions.fetch.options.proxy.url:this.baseUrl=this.namespaceOptions.fetch.options.url}_getErrorMessage(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)}_handleError(t,r){return ed(this,void 0,void 0,function*(){t instanceof(yield eh(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield e.A(72513)).Response:Response}))?t.json().then(e=>{r(new P(this._getErrorMessage(e),t.status||500))}).catch(e=>{r(new L(this._getErrorMessage(e),e))}):r(new L(this._getErrorMessage(t),t))})}_getRequestOptions(e,t,r){let n={method:e};return n="GET"===e||"DELETE"===e?Object.assign(Object.assign({},n),t):Object.assign(Object.assign({duplex:"half",body:t},n),r),(0,$.default)(this.namespaceOptions.fetch.options,n,{clone:!1})}_handleRequest(e,t,r,n){return ed(this,void 0,void 0,function*(){return new Promise((o,i)=>{(0,this.fetch)(t,this._getRequestOptions(e,r,n)).then(e=>{if(!e.ok)throw e;o(e)}).catch(e=>this._handleError(e,i))})})}get(e,t){return ed(this,void 0,void 0,function*(){return this._handleRequest("GET",e,t)})}post(e,t,r){return ed(this,void 0,void 0,function*(){return this._handleRequest("POST",e,t,r)})}put(e,t,r){return ed(this,void 0,void 0,function*(){return this._handleRequest("PUT",e,t,r)})}patch(e,t,r){return ed(this,void 0,void 0,function*(){return this._handleRequest("PATCH",e,t,r)})}delete(e,t){return ed(this,void 0,void 0,function*(){return this._handleRequest("DELETE",e,t)})}get proxy(){var e;return"proxy"===this.key&&!!(null==(e=this.namespaceOptions.fetch.options.proxy)?void 0:e.url)}}class ep extends ef{constructor(){super(...arguments),this.namespace="auth"}grantToken(e={},t=":version/auth/grant"){var r,n,o,i;return r=this,n=void 0,o=void 0,i=function*(){try{let r=this.getRequestUrl(t),n=JSON.stringify(e);return{result:yield this.post(r,n,{headers:{"Content-Type":"application/json"}}).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}},new(o||(o=Promise))(function(e,t){function s(e){try{l(i.next(e))}catch(e){t(e)}}function a(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof o?r:new o(function(e){e(r)})).then(s,a)}l((i=i.apply(r,n||[])).next())})}}(o=u||(u={})).Open="open",o.Close="close",o.Error="error",o.Transcript="Results",o.Metadata="Metadata",o.UtteranceEnd="UtteranceEnd",o.SpeechStarted="SpeechStarted",o.Unhandled="Unhandled";class eg extends el{constructor(e,t={},r=":version/listen"){var n,o;if(super(e),this.namespace="listen",(null==(n=t.keyterm)?void 0:n.length)&&!(null==(o=t.model)?void 0:o.startsWith("nova-3")))throw new _("Keyterms are only supported with the Nova 3 models.");this.connect(t,r)}setupConnection(){this.setupConnectionEvents({Open:u.Open,Close:u.Close,Error:u.Error}),this.conn&&(this.conn.onmessage=e=>{var t,r,n,o;try{let t=JSON.parse(e.data.toString());t.type===u.Metadata?this.emit(u.Metadata,t):t.type===u.Transcript?this.emit(u.Transcript,t):t.type===u.UtteranceEnd?this.emit(u.UtteranceEnd,t):t.type===u.SpeechStarted?this.emit(u.SpeechStarted,t):this.emit(u.Unhandled,t)}catch(i){this.emit(u.Error,{event:e,message:"Unable to parse `data` as JSON.",error:i,url:null==(t=this.conn)?void 0:t.url,readyState:null==(r=this.conn)?void 0:r.readyState,data:(null==(n=e.data)?void 0:n.toString().substring(0,200))+((null==(o=e.data)?void 0:o.toString().length)>200?"...":"")})}})}configure(e){this.send(JSON.stringify({type:"Configure",processors:e}))}keepAlive(){this.send(JSON.stringify({type:"KeepAlive"}))}finalize(){this.send(JSON.stringify({type:"Finalize"}))}finish(){this.requestClose()}requestClose(){this.send(JSON.stringify({type:"CloseStream"}))}}var ey=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})};class ev extends ef{constructor(){super(...arguments),this.namespace="listen"}transcribeUrl(e,t,r=":version/listen"){var n,o;return ey(this,void 0,void 0,function*(){try{let i;if(G(e))i=JSON.stringify(e);else throw new _("Unknown transcription source type");if(void 0!==t&&"callback"in t)throw new _("Callback cannot be provided as an option to a synchronous transcription. Use `transcribeUrlCallback` or `transcribeFileCallback` instead.");if((null==(n=null==t?void 0:t.keyterm)?void 0:n.length)&&!(null==(o=t.model)?void 0:o.startsWith("nova-3")))throw new _("Keyterms are only supported with the Nova 3 models.");let s=this.getRequestUrl(r,{},Object.assign({},t));return{result:yield this.post(s,i).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}transcribeFile(e,t,r=":version/listen"){return ey(this,void 0,void 0,function*(){try{let n;if(X(e))n=e;else throw new _("Unknown transcription source type");if(void 0!==t&&"callback"in t)throw new _("Callback cannot be provided as an option to a synchronous transcription. Use `transcribeUrlCallback` or `transcribeFileCallback` instead.");let o=this.getRequestUrl(r,{},Object.assign({},t));return{result:yield this.post(o,n,{headers:{"Content-Type":"deepgram/audio+video"}}).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}transcribeUrlCallback(e,t,r,n=":version/listen"){return ey(this,void 0,void 0,function*(){try{let o;if(G(e))o=JSON.stringify(e);else throw new _("Unknown transcription source type");let i=this.getRequestUrl(n,{},Object.assign(Object.assign({},r),{callback:t.toString()}));return{result:yield this.post(i,o).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}transcribeFileCallback(e,t,r,n=":version/listen"){return ey(this,void 0,void 0,function*(){try{let o;if(X(e))o=e;else throw new _("Unknown transcription source type");let i=this.getRequestUrl(n,{},Object.assign(Object.assign({},r),{callback:t.toString()}));return{result:yield this.post(i,o,{headers:{"Content-Type":"deepgram/audio+video"}}).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}}class em extends es{constructor(){super(...arguments),this.namespace="listen"}get prerecorded(){return new ev(this.options)}live(e={},t=":version/listen"){return new eg(this.options,e,t)}}var ew=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})};class eb extends ef{constructor(){super(...arguments),this.namespace="manage"}getTokenDetails(e=":version/auth/token"){return ew(this,void 0,void 0,function*(){try{let t=this.getRequestUrl(e);return{result:yield this.get(t).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getProjects(e=":version/projects"){return ew(this,void 0,void 0,function*(){try{let t=this.getRequestUrl(e);return{result:yield this.get(t).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getProject(e,t=":version/projects/:projectId"){return ew(this,void 0,void 0,function*(){try{let r=this.getRequestUrl(t,{projectId:e});return{result:yield this.get(r).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}updateProject(e,t,r=":version/projects/:projectId"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e},t),o=JSON.stringify(t);return{result:yield this.patch(n,o).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}deleteProject(e,t=":version/projects/:projectId"){return ew(this,void 0,void 0,function*(){try{let r=this.getRequestUrl(t,{projectId:e});return yield this.delete(r),{error:null}}catch(e){if(B(e))return{error:e};throw e}})}getProjectKeys(e,t=":version/projects/:projectId/keys"){return ew(this,void 0,void 0,function*(){try{let r=this.getRequestUrl(t,{projectId:e});return{result:yield this.get(r).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getProjectKey(e,t,r=":version/projects/:projectId/keys/:keyId"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e,keyId:t});return{result:yield this.get(n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}createProjectKey(e,t,r=":version/projects/:projectId/keys"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e},t),o=JSON.stringify(t);return{result:yield this.post(n,o).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}deleteProjectKey(e,t,r=":version/projects/:projectId/keys/:keyId"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e,keyId:t});return yield this.delete(n),{error:null}}catch(e){if(B(e))return{error:e};throw e}})}getProjectMembers(e,t=":version/projects/:projectId/members"){return ew(this,void 0,void 0,function*(){try{let r=this.getRequestUrl(t,{projectId:e});return{result:yield this.get(r).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}removeProjectMember(e,t,r=":version/projects/:projectId/members/:memberId"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e,memberId:t});return yield this.delete(n),{error:null}}catch(e){if(B(e))return{error:e};throw e}})}getProjectMemberScopes(e,t,r=":version/projects/:projectId/members/:memberId/scopes"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e,memberId:t});return{result:yield this.get(n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}updateProjectMemberScope(e,t,r,n=":version/projects/:projectId/members/:memberId/scopes"){return ew(this,void 0,void 0,function*(){try{let o=this.getRequestUrl(n,{projectId:e,memberId:t},r),i=JSON.stringify(r);return{result:yield this.put(o,i).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getProjectInvites(e,t=":version/projects/:projectId/invites"){return ew(this,void 0,void 0,function*(){try{let r=this.getRequestUrl(t,{projectId:e});return{result:yield this.get(r).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}sendProjectInvite(e,t,r=":version/projects/:projectId/invites"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e},t),o=JSON.stringify(t);return{result:yield this.post(n,o).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}deleteProjectInvite(e,t,r=":version/projects/:projectId/invites/:email"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e,email:t});return yield this.delete(n),{error:null}}catch(e){if(B(e))return{error:e};throw e}})}leaveProject(e,t=":version/projects/:projectId/leave"){return ew(this,void 0,void 0,function*(){try{let r=this.getRequestUrl(t,{projectId:e});return{result:yield this.delete(r).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getProjectUsageRequests(e,t,r=":version/projects/:projectId/requests"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e},t);return{result:yield this.get(n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getProjectUsageRequest(e,t,r=":version/projects/:projectId/requests/:requestId"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e,requestId:t});return{result:yield this.get(n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getProjectUsageSummary(e,t,r=":version/projects/:projectId/usage"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e},t);return{result:yield this.get(n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getProjectUsageFields(e,t,r=":version/projects/:projectId/usage/fields"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e},t);return{result:yield this.get(n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getProjectBalances(e,t=":version/projects/:projectId/balances"){return ew(this,void 0,void 0,function*(){try{let r=this.getRequestUrl(t,{projectId:e});return{result:yield this.get(r).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getProjectBalance(e,t,r=":version/projects/:projectId/balances/:balanceId"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e,balanceId:t});return{result:yield this.get(n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getAllModels(e,t={},r=":version/projects/:projectId/models"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e},t);return{result:yield this.get(n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getModel(e,t,r=":version/projects/:projectId/models/:modelId"){return ew(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e,modelId:t});return{result:yield this.get(n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}}var ex=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})};class ej extends ef{constructor(){super(...arguments),this.namespace="read"}analyzeUrl(e,t,r=":version/read"){return ex(this,void 0,void 0,function*(){try{let n;if(G(e))n=JSON.stringify(e);else throw new _("Unknown source type");if(void 0!==t&&"callback"in t)throw new _("Callback cannot be provided as an option to a synchronous transcription. Use `analyzeUrlCallback` or `analyzeTextCallback` instead.");let o=this.getRequestUrl(r,{},Object.assign({},t));return{result:yield this.post(o,n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}analyzeText(e,t,r=":version/read"){return ex(this,void 0,void 0,function*(){try{let n;if(Y(e))n=JSON.stringify(e);else throw new _("Unknown source type");if(void 0!==t&&"callback"in t)throw new _("Callback cannot be provided as an option to a synchronous requests. Use `analyzeUrlCallback` or `analyzeTextCallback` instead.");let o=this.getRequestUrl(r,{},Object.assign({},t));return{result:yield this.post(o,n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}analyzeUrlCallback(e,t,r,n=":version/read"){return ex(this,void 0,void 0,function*(){try{let o;if(G(e))o=JSON.stringify(e);else throw new _("Unknown source type");let i=this.getRequestUrl(n,{},Object.assign(Object.assign({},r),{callback:t.toString()}));return{result:yield this.post(i,o).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}analyzeTextCallback(e,t,r,n=":version/read"){return ex(this,void 0,void 0,function*(){try{let o;if(Y(e))o=JSON.stringify(e);else throw new _("Unknown source type");let i=this.getRequestUrl(n,{},Object.assign(Object.assign({},r),{callback:t.toString()}));return{result:yield this.post(i,o,{headers:{"Content-Type":"deepgram/audio+video"}}).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}}var ek=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})};class eE extends ef{constructor(){super(...arguments),this.namespace="selfhosted"}listCredentials(e,t=":version/projects/:projectId/onprem/distribution/credentials"){return ek(this,void 0,void 0,function*(){try{let r=this.getRequestUrl(t,{projectId:e});return{result:yield this.get(r).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getCredentials(e,t,r=":version/projects/:projectId/onprem/distribution/credentials/:credentialsId"){return ek(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e,credentialsId:t});return{result:yield this.get(n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}createCredentials(e,t,r=":version/projects/:projectId/onprem/distribution/credentials"){return ek(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e}),o=JSON.stringify(t);return{result:yield this.post(n,o).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}deleteCredentials(e,t,r=":version/projects/:projectId/onprem/distribution/credentials/:credentialsId"){return ek(this,void 0,void 0,function*(){try{let n=this.getRequestUrl(r,{projectId:e,credentialsId:t});return{result:yield this.delete(n).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}}(i=c||(c={})).Open="Open",i.Close="Close",i.Error="Error",i.Metadata="Metadata",i.Flushed="Flushed",i.Warning="Warning",i.Audio="Audio",i.Unhandled="Unhandled";class eS extends el{constructor(e,t={},r=":version/speak"){super(e),this.namespace="speak",this.connect(t,r)}setupConnection(){this.setupConnectionEvents({Open:c.Open,Close:c.Close,Error:c.Error}),this.conn&&(this.conn.onmessage=e=>{this.handleMessage(e)})}handleTextMessage(e){e.type===c.Metadata?this.emit(c.Metadata,e):e.type===c.Flushed?this.emit(c.Flushed,e):e.type===c.Warning?this.emit(c.Warning,e):this.emit(c.Unhandled,e)}handleBinaryMessage(e){this.emit(c.Audio,e)}sendText(e){this.send(JSON.stringify({type:"Speak",text:e}))}flush(){this.send(JSON.stringify({type:"Flush"}))}clear(){this.send(JSON.stringify({type:"Clear"}))}requestClose(){this.send(JSON.stringify({type:"Close"}))}handleMessage(e){var t,r,n,o,i,s;if("string"==typeof e.data)try{let t=JSON.parse(e.data);this.handleTextMessage(t)}catch(i){this.emit(c.Error,{event:e,message:"Unable to parse `data` as JSON.",error:i,url:null==(t=this.conn)?void 0:t.url,readyState:null==(r=this.conn)?void 0:r.readyState,data:(null==(n=e.data)?void 0:n.toString().substring(0,200))+((null==(o=e.data)?void 0:o.toString().length)>200?"...":"")})}else e.data instanceof Blob?e.data.arrayBuffer().then(e=>{this.handleBinaryMessage(F.Buffer.from(e))}):e.data instanceof ArrayBuffer?this.handleBinaryMessage(F.Buffer.from(e.data)):F.Buffer.isBuffer(e.data)?this.handleBinaryMessage(e.data):(console.log("Received unknown data type",e.data),this.emit(c.Error,{event:e,message:"Received unknown data type.",url:null==(i=this.conn)?void 0:i.url,readyState:null==(s=this.conn)?void 0:s.readyState,dataType:typeof e.data}))}}var eO=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})};class eC extends ef{constructor(){super(...arguments),this.namespace="speak"}request(e,t,r=":version/speak"){return eO(this,void 0,void 0,function*(){let n;if(Y(e))n=JSON.stringify(e);else throw new _("Unknown transcription source type");let o=this.getRequestUrl(r,{},Object.assign({model:"aura-2-thalia-en"},t));return this.result=yield this.post(o,n,{headers:{Accept:"audio/*","Content-Type":"application/json"}}),this})}getStream(){return eO(this,void 0,void 0,function*(){if(!this.result)throw new L("Tried to get stream before making request","");return this.result.body})}getHeaders(){return eO(this,void 0,void 0,function*(){if(!this.result)throw new L("Tried to get headers before making request","");return this.result.headers})}}class eU extends es{constructor(){super(...arguments),this.namespace="speak"}request(e,t,r=":version/speak"){return new eC(this.options).request(e,t,r)}live(e={},t=":version/speak"){return new eS(this.options,e,t)}}var eA=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})};class eR extends ef{constructor(){super(...arguments),this.namespace="models"}getAll(e=":version/models",t={}){return eA(this,void 0,void 0,function*(){try{let r=this.getRequestUrl(e,{},t);return{result:yield this.get(r).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}getModel(e,t=":version/models/:modelId"){return eA(this,void 0,void 0,function*(){try{let r=this.getRequestUrl(t,{modelId:e});return{result:yield this.get(r).then(e=>e.json()),error:null}}catch(e){if(B(e))return{result:null,error:e};throw e}})}}class eM extends es{get auth(){return new ep(this.options)}get listen(){return new em(this.options)}get manage(){return new eb(this.options)}get models(){return new eR(this.options)}get onprem(){return this.selfhosted}get selfhosted(){return new eE(this.options)}get read(){return new ej(this.options)}get speak(){return new eU(this.options)}agent(e="/:version/agent/converse"){return new ec(this.options,e)}get transcription(){throw new q}get projects(){throw new q}get keys(){throw new q}get members(){throw new q}get scopes(){throw new q}get invitation(){throw new q}get usage(){throw new q}get billing(){throw new q}}function eT({onTranscript:e,onTextChange:t,getBaseText:r,onRecordingChange:n,className:o,disabled:i=!1,placeholder:s="Record",silenceMs:a=2e3}){let[l,c]=(0,m.useState)(!1),[h,d]=(0,m.useState)(!1),[f,p]=(0,m.useState)(null),[g,y]=(0,m.useState)(null),w=(0,m.useRef)(""),b=(0,m.useRef)(null),x=(0,m.useRef)(null),j=(0,m.useRef)(null),k=(0,m.useRef)(null),S=(0,m.useRef)(""),O=(0,m.useRef)(""),C=(0,m.useRef)(!1);(0,m.useEffect)(()=>()=>{_()},[]);let U=async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(e=>e.stop()),y(!0),p(null),!0}catch(e){return console.error("Microphone permission denied:",e),y(!1),p("Microphone access denied"),!1}},A=()=>{k.current&&(clearTimeout(k.current),k.current=null)},R=()=>{A(),k.current=setTimeout(()=>{q(!0)},a)},_=()=>{A(),x.current&&x.current.getTracks().forEach(e=>e.stop()),j.current&&j.current.finish()},B=async()=>{try{let e=await fetch("/api/deepgram");if(!e.ok)throw Error(`Failed to get Deepgram token: ${e.statusText}`);return await e.json()}catch(e){return console.error("Error fetching Deepgram token:",e),p("Failed to connect to speech service"),null}},P=async()=>{try{let e,r=await B();if(!r)return null;let n=r.key||r.token;if(!n)throw Error("No API key received from server");let o=(e={},"string"==typeof n||"function"==typeof n?e.key=n:"object"==typeof n&&(e=n),new eM(e)).listen.live({model:"nova-2",language:"en",smart_format:!0,punctuate:!0,profanity_filter:!1,interim_results:!0,endpointing:300,utterance_end_ms:1e3});return o.on(u.Open,()=>{console.log("Deepgram connection opened"),p(null)}),o.on(u.Transcript,e=>{if(!C.current)return;let r=e.channel?.alternatives?.[0]?.transcript?.trim();if(!r)return;R();let n=!!e.is_final;n?(O.current+=r+" ",S.current=""):S.current=r;let o=w.current+O.current+(n?"":S.current);t?.(o)}),o.on(u.Error,e=>{console.error("Deepgram error:",e),p("Speech recognition error occurred"),q(!1)}),o.on(u.Close,()=>{console.log("Deepgram connection closed"),q(!0)}),o}catch(e){return console.error("Error setting up Deepgram:",e),p("Failed to initialize speech recognition"),null}},L=async()=>{if(await U())try{d(!0),p(null),S.current="",O.current="",w.current=r?.()??"";let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});x.current=e;let t=await P();if(!t)throw Error("Failed to establish Deepgram connection");j.current=t;let o="audio/webm;codecs=opus",i=MediaRecorder.isTypeSupported(o)?o:void 0,s=new MediaRecorder(e,i?{mimeType:i}:void 0);b.current=s,s.addEventListener("dataavailable",async e=>{if(!(e.data.size<=0)&&j.current)try{let t=await e.data.arrayBuffer();j.current.send(t)}catch(e){console.error("Failed to send audio chunk:",e)}}),t.on(u.Open,()=>{R(),"inactive"===s.state&&s.start(250)}),C.current=!0,c(!0),d(!1),n?.(!0)}catch(e){console.error("Error starting recording:",e),p("Failed to start recording"),d(!1),_()}},q=(0,m.useCallback)((r=!0)=>{if(C.current)try{A(),b.current&&"inactive"!==b.current.state&&b.current.stop(),x.current&&x.current.getTracks().forEach(e=>e.stop()),j.current&&j.current.finish(),C.current=!1,c(!1),n?.(!1);let o=S.current.trim(),i=(O.current+(o?` ${o}`:"")).trim();if(r){let r=w.current+O.current+(o?o+" ":"");t?.(r),i&&e(i),w.current=r}S.current="",O.current=""}catch(e){console.error("Error stopping recording:",e),p("Error stopping recording")}},[n,t,e]);return(0,v.jsx)("div",{className:(0,M.cn)("relative",o),children:(0,v.jsx)("button",{onClick:()=>{l?q():i||L()},disabled:i||h,className:(0,M.cn)("relative p-2 rounded-full transition-colors duration-200","outline-none focus-visible:ring-2 focus-visible:ring-primary","disabled:opacity-50 disabled:cursor-not-allowed",l?"text-red-500 hover:text-red-600":f?"text-destructive hover:text-destructive/80":"text-muted-foreground hover:text-foreground",h&&"animate-pulse"),title:i?"Voice recording disabled":f?"Microphone access denied"===f?"Microphone access denied. Please enable microphone permissions in your browser settings.":f:l?"Stop recording":s,"aria-pressed":l,children:h?(0,v.jsx)(E.Loader2,{className:"size-5 animate-spin"}):l?(0,v.jsx)(N,{className:"size-5"}):f?(0,v.jsx)(I.AlertCircle,{className:"size-5"}):(0,v.jsx)(T,{className:"size-5"})})})}var eN=e.i(63415),eI=e.i(65735),e_=e.i(12598),eB=e.i(22016);function eP({value:e,onChange:t,onSend:r,onStopJob:n,isStoppingJob:o=!1,disabled:i=!1,isSending:s=!1,isVideoProcessing:a=!1,mode:l,onModeChange:u,language:c,onLanguageChange:h,duration:d,onDurationChange:f,uploadedFiles:p,onAddFile:g,onRemoveFile:y,onClearFiles:x,showModeControls:T=!0,isNewChat:N=!1}){let{accessToken:I,user:_}=(0,eI.useUser)(),B=(0,e_.useQueryClient)(),P=(0,m.useRef)(null),L=(0,m.useRef)(null),q=(0,m.useRef)(e),[D,z]=(0,m.useState)([]),[F,J]=(0,m.useState)(null),[$,W]=(0,m.useState)(!1),[H,V]=(0,m.useState)(!1),[K,G]=(0,m.useState)(!1),Y=void 0!==p,X=p??D,Q=e=>{if(Y)return void g?.(e);let t=`${Date.now()}-${Math.random()}`,r=URL.createObjectURL(e);z(n=>[...n,{id:t,file:e,preview:r,name:e.name}])};(0,m.useEffect)(()=>{if(P.current){P.current.focus();let e=window.innerWidth<640;P.current.style.height=`${e?32:40}px`}},[]),(0,m.useEffect)(()=>{q.current=e},[e]);let Z=e=>{let t=P.current;if(!t)return;let r=void 0!==e?e:t.value;t.style.height="auto";let n=window.innerWidth<640?32:40;if(!r.trim()){t.style.height=`${n}px`,t.style.overflowY="hidden";return}let o=t.scrollHeight,i=Math.min(Math.max(o,n),200);t.style.height=`${i}px`,t.style.overflowY=o>200?"auto":"hidden"};(0,m.useEffect)(()=>{Z(e)},[e]),(0,m.useEffect)(()=>{let t=()=>{Z(e)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[e]);let ee=async()=>X.length&&"video"===l?await Promise.all(X.map(e=>{let t;return t=e.file,new Promise((e,r)=>{let n=new FileReader;n.onload=()=>{let t=n.result;e(t.includes(",")?t.split(",")[1]:t)},n.onerror=e=>r(e),n.readAsDataURL(t)})})):null,et=(0,m.useMemo)(()=>{let t=!!e.trim(),r=X.length>0;return"video"===l?t||r:t},[l,X.length,e]),er=!!(a&&n&&"video"===l),en=!!(N&&_&&0===_.credits),eo=i||s||a||$||!et||e.length<=10||en,ei=async()=>{if(!eo)try{W(!0);let t=await ee(),n=e.trim()||(t&&t.length?"Explain this problem from the image":"");if(!n&&!t?.length)return;if(await r({message:n,images:t&&t.length?t:null}),Y?x?.():z(e=>(e.forEach(e=>URL.revokeObjectURL(e.preview)),[])),P.current){let e=window.innerWidth<640;P.current.style.height=`${e?32:40}px`,P.current.style.overflowY="hidden"}}catch(e){console.error("Failed to send follow-up:",e)}finally{W(!1),B.invalidateQueries({queryKey:["sidebar-chat-history",I]})}},es=N&&_&&0===_.credits;return(0,v.jsx)("div",{className:"pb-5 flex-shrink-0 md:px-0 sm:pr-5",children:(0,v.jsxs)("div",{className:"w-full max-w-4xl mx-auto",children:[(0,v.jsxs)("div",{className:(0,M.cn)("w-full rounded-xl p-2 sm:p-3 space-y-2 sm:space-y-3 relative transition-all duration-100 ease-out dark:bg-[#181818] dark:border dark:border-prep-badge-border shadow-[0px_6px_24px_0px_rgba(0,0,0,0.08),0px_2.5px_4px_-1px_rgba(0,0,0,0.08),0px_1.5px_1px_-1px_rgba(0,0,0,0.16),0px_1.5px_4px_-1px_rgba(0,0,0,0.12)]",H&&"border-2 border-primary bg-primary/5"),onClick:()=>P.current?.focus(),onDragOver:e=>{e.preventDefault(),e.stopPropagation(),"video"!==l||i||a||V(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),V(!1)},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),V(!1),"video"!==l||i||a)return;let t=e.dataTransfer.files;t&&Array.from(t).forEach(e=>{e.type.startsWith("image/")&&Q(e)})},children:[(0,v.jsx)("textarea",{ref:P,value:e,onChange:e=>t(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ei())},onPaste:e=>{if("video"!==l)return;let t=e.clipboardData?.items;if(t)for(let r=0;r<t.length;r++){let n=t[r];if(n.type.startsWith("image/")){e.preventDefault();let t=n.getAsFile();t&&Q(t)}}},className:"outline-none w-full min-h-8 sm:min-h-10 max-h-[200px] resize-none bg-transparent disabled:opacity-50 text-sm sm:text-base overflow-y-auto",placeholder:en?"Out of credits. Cannot create new chats...":K?"Listening...":a?"Wait for video generation to complete...":"video"===l?"Ask a question (will generate video)...":"Ask a question...",rows:1,disabled:i||a||K||en}),X.length>0&&(0,v.jsx)("div",{className:"flex flex-wrap gap-2",children:X.map(e=>(0,v.jsxs)("div",{className:"relative group",onMouseEnter:()=>J(e.id),onMouseLeave:()=>J(null),children:[(0,v.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-muted border border-prep-badge-border rounded-md text-xs",children:[(0,v.jsx)("span",{className:"max-w-[120px] truncate",children:((e,t=18)=>{if(e.length<=t)return e;let r=e.split(".").pop(),n=e.substring(0,e.lastIndexOf(".")),o=t-(r?.length||0)-4;return`${n.substring(0,o)}...${r}`})(e.name)}),(0,v.jsx)("button",{onClick:t=>{var r;t.stopPropagation(),r=e.id,Y?y?.(r):z(e=>{let t=e.find(e=>e.id===r);return t&&URL.revokeObjectURL(t.preview),e.filter(e=>e.id!==r)})},className:"hover:bg-background rounded-sm p-0.5 transition-colors",children:(0,v.jsx)(R.X,{className:"size-3"})})]}),F===e.id&&(0,v.jsx)("div",{className:"absolute bottom-full left-0 mb-2 z-10 pointer-events-none",children:(0,v.jsx)("img",{src:e.preview,alt:e.name,className:"h-[80px] w-auto rounded-md shadow-lg border border-prep-badge-border"})})]},e.id))}),(0,v.jsxs)("div",{className:"flex w-full gap-3 items-end justify-between",children:[(0,v.jsxs)("div",{className:"flex flex-wrap gap-1.5 items-center overflow-x-auto scrollbar-hide flex-1",children:[(0,v.jsx)("input",{ref:L,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:e=>{let t=e.target.files;t&&(Array.from(t).forEach(e=>{e.type.startsWith("image/")&&Q(e)}),L.current&&(L.current.value=""))}}),(0,v.jsxs)("button",{onClick:e=>{e.stopPropagation(),"video"===l&&L.current?.click()},disabled:"video"!==l||i||a||en,className:(0,M.cn)("py-1.5 px-2.5 outline-none border border-[var(--prep-badge-border)] rounded-md flex items-center gap-1.5 text-xs flex-shrink-0 whitespace-nowrap transition-colors","video"!==l||i||a||en?"cursor-not-allowed opacity-60":"hover:bg-muted cursor-pointer"),title:"video"!==l?"Switch to Video mode to attach images":"Upload reference images",children:[(0,v.jsx)(C.Plus,{className:"size-3.5"}),(0,v.jsx)("span",{children:"Upload"})]}),(0,v.jsxs)("div",{className:"hidden sm:flex gap-1.5 items-center",children:[T&&(0,v.jsxs)("div",{className:"flex items-center border border-[var(--prep-badge-border)] rounded-md overflow-hidden flex-shrink-0",children:[(0,v.jsxs)("button",{onClick:e=>{e.stopPropagation(),u("text")},className:(0,M.cn)("py-1.5 px-2.5 text-xs flex items-center gap-1.5 transition-colors whitespace-nowrap","text"===l?"bg-muted text-foreground":"hover:bg-muted/50 text-muted-foreground"),title:"Text mode - quick response",children:[(0,v.jsx)(O.MessageSquare,{className:"size-3.5"}),(0,v.jsx)("span",{children:"Text"})]}),(0,v.jsxs)("button",{onClick:e=>{e.stopPropagation(),u("video")},className:(0,M.cn)("py-1.5 px-2.5 text-xs flex items-center gap-1.5 transition-colors whitespace-nowrap","video"===l?"bg-muted text-foreground":"hover:bg-muted/50 text-muted-foreground"),title:"Video mode - generate video",children:[(0,v.jsx)(A.Video,{className:"size-3.5"}),(0,v.jsx)("span",{children:"Video"})]})]}),"video"===l&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(eN.DropdownMenu,{children:[(0,v.jsx)(eN.DropdownMenuTrigger,{asChild:!0,children:(0,v.jsxs)("button",{className:"py-1.5 px-2.5 outline-none border border-[var(--prep-badge-border)] rounded-md flex items-center gap-1.5 hover:bg-muted cursor-pointer text-xs flex-shrink-0 whitespace-nowrap",title:"Select video duration",children:[(0,v.jsx)(b.Clock,{className:"size-3.5"}),(0,v.jsxs)("span",{children:[d," min"]})]})}),(0,v.jsx)(eN.DropdownMenuContent,{align:"start",side:"top",className:"min-w-[100px]",children:(0,v.jsx)(eN.DropdownMenuRadioGroup,{value:String(d),onValueChange:e=>f(Number(e)),children:[1,2,3].map(e=>(0,v.jsx)(eN.DropdownMenuRadioItem,{value:String(e),onSelect:e=>e.preventDefault(),children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(b.Clock,{className:"size-3.5"}),(0,v.jsxs)("span",{children:[e," min"]})]})},e))})})]}),(0,v.jsxs)(eN.DropdownMenu,{children:[(0,v.jsx)(eN.DropdownMenuTrigger,{asChild:!0,children:(0,v.jsxs)("button",{className:"py-1.5 px-2.5 outline-none border border-[var(--prep-badge-border)] rounded-md flex items-center gap-1.5 hover:bg-muted cursor-pointer text-xs flex-shrink-0 whitespace-nowrap",title:"Select narration language",children:[(0,v.jsx)(j,{className:"size-3.5"}),(0,v.jsx)("span",{className:"capitalize",children:"hindi"===c?"":"English"})]})}),(0,v.jsx)(eN.DropdownMenuContent,{align:"start",side:"top",className:"min-w-[120px]",children:(0,v.jsxs)(eN.DropdownMenuRadioGroup,{value:c,onValueChange:e=>h(e),children:[(0,v.jsx)(eN.DropdownMenuRadioItem,{value:"hindi",onSelect:e=>e.preventDefault(),children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("span",{children:""}),(0,v.jsx)("span",{children:" (Hindi)"})]})}),(0,v.jsx)(eN.DropdownMenuRadioItem,{value:"english",onSelect:e=>e.preventDefault(),children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("span",{children:""}),(0,v.jsx)("span",{children:"English"})]})})]})})]})]})]}),(0,v.jsxs)(eN.DropdownMenu,{children:[(0,v.jsx)(eN.DropdownMenuTrigger,{asChild:!0,children:(0,v.jsxs)("button",{className:"py-1.5 px-2.5 outline-none border border-[var(--prep-badge-border)] rounded-md flex items-center gap-1.5 hover:bg-muted cursor-pointer text-xs flex-shrink-0 whitespace-nowrap sm:hidden",disabled:i||a||en,children:["text"===l?(0,v.jsx)(O.MessageSquare,{className:"size-3.5"}):(0,v.jsx)(A.Video,{className:"size-3.5"}),(0,v.jsx)("span",{children:"text"===l?"Text":"Video"}),(0,v.jsx)(S,{className:"size-3.5"})]})}),(0,v.jsxs)(eN.DropdownMenuContent,{className:"w-56 sm:hidden",children:[T&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(eN.DropdownMenuLabel,{children:"Mode"}),(0,v.jsxs)(eN.DropdownMenuRadioGroup,{value:l,onValueChange:e=>u(e),children:[(0,v.jsx)(eN.DropdownMenuRadioItem,{value:"text",onSelect:e=>e.preventDefault(),children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(O.MessageSquare,{className:"size-3.5"}),(0,v.jsx)("span",{children:"Text"})]})}),(0,v.jsx)(eN.DropdownMenuRadioItem,{value:"video",onSelect:e=>e.preventDefault(),children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(A.Video,{className:"size-3.5"}),(0,v.jsx)("span",{children:"Video"})]})})]}),"video"===l&&(0,v.jsx)(eN.DropdownMenuSeparator,{})]}),"video"===l&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(eN.DropdownMenuLabel,{children:"Duration"}),(0,v.jsx)(eN.DropdownMenuRadioGroup,{value:String(d),onValueChange:e=>f(Number(e)),children:[1,2,3].map(e=>(0,v.jsx)(eN.DropdownMenuRadioItem,{value:String(e),onSelect:e=>e.preventDefault(),children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(b.Clock,{className:"size-3.5"}),(0,v.jsxs)("span",{children:[e," min"]})]})},e))}),(0,v.jsx)(eN.DropdownMenuSeparator,{}),(0,v.jsx)(eN.DropdownMenuLabel,{children:"Language"}),(0,v.jsxs)(eN.DropdownMenuRadioGroup,{value:c,onValueChange:e=>h(e),children:[(0,v.jsx)(eN.DropdownMenuRadioItem,{value:"hindi",onSelect:e=>e.preventDefault(),children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("span",{children:""}),(0,v.jsx)("span",{children:" (Hindi)"})]})}),(0,v.jsx)(eN.DropdownMenuRadioItem,{value:"english",onSelect:e=>e.preventDefault(),children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("span",{children:""}),(0,v.jsx)("span",{children:"English"})]})})]})]})]})]})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0 self-end xs:self-auto",children:[(0,v.jsx)(eT,{onTranscript:()=>{P.current?.focus()},onTextChange:e=>{t(e),P.current?.focus()},getBaseText:()=>q.current,onRecordingChange:e=>{G(e)},disabled:i||a||s||en,className:"flex-shrink-0"}),er?(0,v.jsx)("button",{onClick:e=>{e.stopPropagation(),n?.()},disabled:o,className:"p-2 outline-none rounded-md flex items-center justify-center bg-red-500 text-white hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex-shrink-0 transition-colors",children:o?(0,v.jsx)(E.Loader2,{className:"size-4 animate-spin"}):(0,v.jsx)(U.StopCircle,{className:"size-4"})}):(0,v.jsx)("button",{onClick:ei,disabled:eo,className:"p-2 outline-none rounded-md flex items-center justify-center bg-foreground text-background hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex-shrink-0",children:s||$?(0,v.jsx)(E.Loader2,{className:"size-4 animate-spin"}):(0,v.jsx)(w.ArrowUp,{className:"size-4"})})]})]})]}),es&&(0,v.jsxs)("div",{className:"mt-3 flex items-start gap-2 p-3 rounded-lg bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-900/30",children:[(0,v.jsx)(k,{className:"size-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5"}),(0,v.jsxs)("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[(0,v.jsx)("span",{className:"font-medium",children:"Out of credits!"})," ",_?.feedback_submitted?(0,v.jsx)("span",{children:"You've already submitted feedback. Please contact support or upgrade your plan to continue."}):(0,v.jsxs)("span",{children:[(0,v.jsx)(eB.default,{href:"/feedback",className:"text-blue-500 hover:text-blue-600",children:"Submit your feedback"}),"to get more credits and continue using AIPrep."]})]})]})]})})}e.s(["ChatComposer",()=>eP],46920)}]);